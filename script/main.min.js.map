{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/script/main.coffee"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","$","adjustSize","any","calculateTimeoutInMs","errorGettingQuote","getLocalQuote","getQuote","localQuotes","renderQuote","scheduleGetQuote","setupBackgrounds","jQuery","Math","floor","random","quote","quoteLength","size","text","css","author","getJSON","quotes","done","fail","numWords","totalWords","txt","split","max","window","setTimeout","backgrounds","changeBackground","bg","url","setInterval"],"mappings":"CAAA,QAAAA,GAAAC,EAAAC,EAAAC,GAAA,QAAAC,GAAAC,EAAAC,GAAA,IAAAJ,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,GAAAE,GAAA,kBAAAC,UAAAA,OAAA,KAAAF,GAAAC,EAAA,MAAAA,GAAAF,GAAA,EAAA,IAAAI,EAAA,MAAAA,GAAAJ,GAAA,EAAA,IAAAK,GAAA,GAAAC,OAAA,uBAAAN,EAAA,IAAA,MAAAK,GAAAE,KAAA,mBAAAF,EAAA,GAAAG,GAAAX,EAAAG,IAAAS,WAAAb,GAAAI,GAAA,GAAAU,KAAAF,EAAAC,QAAA,SAAAd,GAAA,GAAAE,GAAAD,EAAAI,GAAA,GAAAL,EAAA,OAAAI,GAAAF,EAAAA,EAAAF,IAAAa,EAAAA,EAAAC,QAAAd,EAAAC,EAAAC,EAAAC,GAAA,MAAAD,GAAAG,GAAAS,QAAA,IAAA,GAAAL,GAAA,kBAAAD,UAAAA,QAAAH,EAAA,EAAAA,EAAAF,EAAAa,OAAAX,IAAAD,EAAAD,EAAAE,GAAA,OAAAD,KAAAa,GAAA,SAAAT,EAAAU,EAAAJ,GCAA,GAAAK,GAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,CAEAV,GAAAW,OAEAT,EAAA,SAAAd,GACA,MAAAA,GAAAwB,KAAAC,MAAAD,KAAAE,SAAA1B,EAAAS,UAGAI,EAAA,SAAAc,GACA,GAAAC,GAAAC,CAGA,OAFAD,GAAAD,EAAAG,KAAArB,OACAoB,EAAAD,EAAA,GAAA,MAAAA,EAAA,IAAA,MAAA,MACAhB,EAAA,UAAAmB,IAAA,YAAAF,IAGAT,EAAA,SAAAO,GAGA,MAFAd,GAAAc,GACAf,EAAA,UAAAkB,KAAAH,EAAAG,MACAlB,EAAA,WAAAkB,KAAAH,EAAAK,SAGAb,KAEAF,EAAA,WACA,GAAAU,EACA,OAAA,KAAAR,EAAAV,OACAG,EAAAqB,QAAA,mBAAA,SAAAC,GAEA,MADAf,GAAAe,EACAjB,OAGAU,EAAAb,EAAAK,GACAC,EAAAO,GACAN,EAAAM,KAIAX,EAAA,WACA,MAAAC,MAGAC,EAAA,WACA,MAAAN,GAAAqB,QAAA,aAAAb,GAAAe,KAAAd,GAAAe,KAAApB,IAGAD,EAAA,SAAAY,GACA,GAAAU,GAAAC,CAKA,OAJAD,GAAA,SAAAE,GACA,MAAAA,GAAAC,MAAA,OAAA/B,QAEA6B,EAAAD,EAAAV,EAAAG,MAAAO,EAAAV,EAAAK,QACAR,KAAAiB,IAAA,IAAAH,EAAA,IAAA,GAAA,IAAA,MAGAjB,EAAA,SAAAM,GACA,MAAAe,QAAAC,WAAAzB,EAAAH,EAAAY,KAGAL,EAAA,WACA,MAAAV,GAAAqB,QAAA,wBAAA,SAAAW,GACA,GAAAC,EAQA,OAPAA,GAAA,WACA,GAAAC,EAGA,OAFAA,GAAAhC,EAAA8B,GACAhC,EAAA,QAAAmB,IAAA,mBAAA,OAAAe,EAAAC,IAAA,KACAnC,EAAA,WAAAkB,KAAAgB,EAAAd,OAAA,YAAAc,EAAAd,OAAA,KAEAa,IACAH,OAAAM,YAAAH,EAAA,QAIAjC,EAAA,WAEA,MADAU,KACAD,GACAS,KAAAlB,EAAA,UAAAkB,OACAE,OAAApB,EAAA,WAAAkB,qBAKA","file":"main.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","var $, adjustSize, any, calculateTimeoutInMs, errorGettingQuote, getLocalQuote, getQuote, localQuotes, renderQuote, scheduleGetQuote, setupBackgrounds;\n\n$ = jQuery;\n\nany = function(a) {\n  return a[Math.floor(Math.random() * a.length)];\n};\n\nadjustSize = function(quote) {\n  var quoteLength, size;\n  quoteLength = quote.text.length;\n  size = quoteLength < 50 ? '4em' : quoteLength < 100 ? '3em' : '2em';\n  return $('#quote').css('font-size', size);\n};\n\nrenderQuote = function(quote) {\n  adjustSize(quote);\n  $('#quote').text(quote.text);\n  return $('#author').text(quote.author);\n};\n\nlocalQuotes = [];\n\ngetLocalQuote = function() {\n  var quote;\n  if (localQuotes.length === 0) {\n    return $.getJSON('data/quotes.json', function(quotes) {\n      localQuotes = quotes;\n      return getLocalQuote();\n    });\n  } else {\n    quote = any(localQuotes);\n    renderQuote(quote);\n    return scheduleGetQuote(quote);\n  }\n};\n\nerrorGettingQuote = function() {\n  return getLocalQuote();\n};\n\ngetQuote = function() {\n  return $.getJSON('quotes/any', renderQuote).done(scheduleGetQuote).fail(errorGettingQuote);\n};\n\ncalculateTimeoutInMs = function(quote) {\n  var numWords, totalWords;\n  numWords = function(txt) {\n    return txt.split(/\\s+/).length;\n  };\n  totalWords = numWords(quote.text) + numWords(quote.author);\n  return Math.max(5000, totalWords / 200.0 * 60 * 1000 + 1000);\n};\n\nscheduleGetQuote = function(quote) {\n  return window.setTimeout(getQuote, calculateTimeoutInMs(quote));\n};\n\nsetupBackgrounds = function() {\n  return $.getJSON('data/backgrounds.json', function(backgrounds) {\n    var changeBackground;\n    changeBackground = function() {\n      var bg;\n      bg = any(backgrounds);\n      $('body').css('background-image', \"url(\" + bg.url + \")\");\n      return $('#footer').text(bg.author ? \"Photo by \" + bg.author : '');\n    };\n    changeBackground();\n    return window.setInterval(changeBackground, 30000);\n  });\n};\n\n$(function() {\n  setupBackgrounds();\n  return scheduleGetQuote({\n    text: $('#quote').text(),\n    author: $('#author').text()\n  });\n});\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIm1haW4uY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLElBQUE7O0FBQUEsQ0FBQSxHQUFJOztBQUVKLEdBQUEsR0FBTSxTQUFDLENBQUQ7U0FBTyxDQUFFLENBQUEsSUFBSSxDQUFDLEtBQUwsQ0FBVyxJQUFJLENBQUMsTUFBTCxDQUFBLENBQUEsR0FBZ0IsQ0FBQyxDQUFDLE1BQTdCLENBQUE7QUFBVDs7QUFFTixVQUFBLEdBQWEsU0FBQyxLQUFEO0FBQ1gsTUFBQTtFQUFBLFdBQUEsR0FBYyxLQUFLLENBQUMsSUFBSSxDQUFDO0VBQ3pCLElBQUEsR0FDSyxXQUFBLEdBQWMsRUFBakIsR0FDRSxLQURGLEdBRVEsV0FBQSxHQUFjLEdBQWpCLEdBQ0gsS0FERyxHQUdIO1NBQ0osQ0FBQSxDQUFFLFFBQUYsQ0FBVyxDQUFDLEdBQVosQ0FBZ0IsV0FBaEIsRUFBNkIsSUFBN0I7QUFUVzs7QUFXYixXQUFBLEdBQWMsU0FBQyxLQUFEO0VBQ1osVUFBQSxDQUFXLEtBQVg7RUFDQSxDQUFBLENBQUUsUUFBRixDQUFXLENBQUMsSUFBWixDQUFpQixLQUFLLENBQUMsSUFBdkI7U0FDQSxDQUFBLENBQUUsU0FBRixDQUFZLENBQUMsSUFBYixDQUFrQixLQUFLLENBQUMsTUFBeEI7QUFIWTs7QUFLZCxXQUFBLEdBQWM7O0FBQ2QsYUFBQSxHQUFnQixTQUFBO0FBQ2QsTUFBQTtFQUFBLElBQUcsV0FBVyxDQUFDLE1BQVosS0FBc0IsQ0FBekI7V0FDRSxDQUFDLENBQUMsT0FBRixDQUFVLGtCQUFWLEVBQThCLFNBQUMsTUFBRDtNQUM1QixXQUFBLEdBQWM7YUFDZCxhQUFBLENBQUE7SUFGNEIsQ0FBOUIsRUFERjtHQUFBLE1BQUE7SUFLRSxLQUFBLEdBQVEsR0FBQSxDQUFJLFdBQUo7SUFDUixXQUFBLENBQVksS0FBWjtXQUNBLGdCQUFBLENBQWlCLEtBQWpCLEVBUEY7O0FBRGM7O0FBVWhCLGlCQUFBLEdBQW9CLFNBQUE7U0FDbEIsYUFBQSxDQUFBO0FBRGtCOztBQUdwQixRQUFBLEdBQVcsU0FBQTtTQUNULENBQUMsQ0FBQyxPQUFGLENBQVUsWUFBVixFQUF3QixXQUF4QixDQUNFLENBQUMsSUFESCxDQUNRLGdCQURSLENBRUUsQ0FBQyxJQUZILENBRVEsaUJBRlI7QUFEUzs7QUFLWCxvQkFBQSxHQUF1QixTQUFDLEtBQUQ7QUFDckIsTUFBQTtFQUFBLFFBQUEsR0FBVyxTQUFDLEdBQUQ7V0FBUyxHQUFHLENBQUMsS0FBSixDQUFVLEtBQVYsQ0FBZ0IsQ0FBQztFQUExQjtFQUNYLFVBQUEsR0FBYSxRQUFBLENBQVMsS0FBSyxDQUFDLElBQWYsQ0FBQSxHQUF1QixRQUFBLENBQVMsS0FBSyxDQUFDLE1BQWY7U0FHcEMsSUFBSSxDQUFDLEdBQUwsQ0FBUyxJQUFULEVBQWUsVUFBQSxHQUFhLEtBQWIsR0FBcUIsRUFBckIsR0FBMEIsSUFBMUIsR0FBaUMsSUFBaEQ7QUFMcUI7O0FBT3ZCLGdCQUFBLEdBQW1CLFNBQUMsS0FBRDtTQUNqQixNQUFNLENBQUMsVUFBUCxDQUFrQixRQUFsQixFQUE0QixvQkFBQSxDQUFxQixLQUFyQixDQUE1QjtBQURpQjs7QUFHbkIsZ0JBQUEsR0FBbUIsU0FBQTtTQUdqQixDQUFDLENBQUMsT0FBRixDQUFVLHVCQUFWLEVBQW1DLFNBQUMsV0FBRDtBQUNqQyxRQUFBO0lBQUEsZ0JBQUEsR0FBbUIsU0FBQTtBQUNqQixVQUFBO01BQUEsRUFBQSxHQUFLLEdBQUEsQ0FBSSxXQUFKO01BQ0wsQ0FBQSxDQUFFLE1BQUYsQ0FBUyxDQUFDLEdBQVYsQ0FBYyxrQkFBZCxFQUFrQyxNQUFBLEdBQU8sRUFBRSxDQUFDLEdBQVYsR0FBYyxHQUFoRDthQUNBLENBQUEsQ0FBRSxTQUFGLENBQVksQ0FBQyxJQUFiLENBQXFCLEVBQUUsQ0FBQyxNQUFOLEdBQWtCLFdBQUEsR0FBWSxFQUFFLENBQUMsTUFBakMsR0FBK0MsRUFBakU7SUFIaUI7SUFJbkIsZ0JBQUEsQ0FBQTtXQUNBLE1BQU0sQ0FBQyxXQUFQLENBQW1CLGdCQUFuQixFQUFxQyxLQUFyQztFQU5pQyxDQUFuQztBQUhpQjs7QUFXbkIsQ0FBQSxDQUFFLFNBQUE7RUFDQSxnQkFBQSxDQUFBO1NBQ0EsZ0JBQUEsQ0FBaUI7SUFBQSxJQUFBLEVBQU0sQ0FBQSxDQUFFLFFBQUYsQ0FBVyxDQUFDLElBQVosQ0FBQSxDQUFOO0lBQTBCLE1BQUEsRUFBUSxDQUFBLENBQUUsU0FBRixDQUFZLENBQUMsSUFBYixDQUFBLENBQWxDO0dBQWpCO0FBRkEsQ0FBRiJ9\n"],"sourceRoot":"/source/"}